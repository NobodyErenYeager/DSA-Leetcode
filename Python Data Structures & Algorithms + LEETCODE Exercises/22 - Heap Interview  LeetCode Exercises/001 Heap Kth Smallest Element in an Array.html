<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Coding Assignment</title>

    <style>
      body {
        font-family: sf pro text, -apple-system, BlinkMacSystemFont, Roboto,
          segoe ui, Helvetica, Arial, sans-serif, apple color emoji,
          segoe ui emoji, segoe ui symbol;
        font-weight: 400;
        line-height: 22.4px;
        font-size: 16px;
      }
      p, ul, ol {
        font-size: 16px;
        font-weight: 400;
      }
      h1, h2, h3, h4, h5, h6 {
        font-weight: bold;
      }
      ul {
        list-style: none;
        margin: 0;
        padding: 0;
        max-width: none;
      }
      .code-snippet {
        background-color: #fff;
        border: 1px solid #d1d7dc;
        color: #b4690e;
        font-size: 90%;
        padding: 0.2rem 0.4rem;
      }
      .code-block {
        background-color: #fff;
        color: #b4690e;
        font-size: 90%;
      }
      .black-block {
        color: #000000;
      }
      .italic-text {
        font-style: italic;
      }
    </style>
  </head>

  <body onload="main()">
    <h1 id="coding-title"></h1>
    <div>
      <h2>Instructions</h2>
      <div id="coding-instructions"></div>
    </div>
    <div>
      <h2>Test(s)</h2>
      <div id="coding-tests"></div>
    </div>
    <div>
      <h2>Solution(s)</h2>
      <div id="coding-solutions"></div>
    </div>

    <script>
      const quizData = {"title": "001 Heap Kth Smallest Element in an Array", "hasInstructions": true, "hasTests": true, "hasSolutions": true, "instructions": "<p>You are given a list of numbers called <code><strong>nums</strong></code> and a number <code><strong>k</strong></code>. <br><br>Your task is to write a function <code><strong>find_kth_smallest(nums, k)</strong></code> to find the <code><strong>k</strong></code>th smallest number in the list.<br><br>The list can contain duplicate numbers and <code><strong>k</strong></code> is guaranteed to be within the range of the length of the list.<br><br>This function will take the following parameters:</p><ul><li><p><code><strong>nums</strong></code>: A list of integers.</p></li><li><p><code><strong>k</strong></code>: An integer.</p></li></ul><p><br></p><p>This function should return the <code><strong>k</strong></code>th smallest number in <code><strong>nums</strong></code>.</p><p><br></p><p><strong>Example 1:</strong></p><pre class=\"prettyprint linenums\">nums = [3, 2, 1, 5, 6, 4]\nk = 2\nprint(find_kth_smallest(nums, k))</pre><p>In the example above, the function should return <code><strong>2</strong></code>. If we sort the list, it becomes <code><strong>[1, 2, 3, 4, 5, 6]</strong></code>. The 2nd smallest number is <code><strong>2</strong></code>, so the function returns <code><strong>2</strong></code>.</p><p><br></p><p><strong>Example 2:</strong></p><pre class=\"prettyprint linenums\">nums = [3, 2, 3, 1, 2, 4, 5, 5, 6]\nk = 4\nprint(find_kth_smallest(nums, k))</pre><p>In the example above, the function should return <code><strong>3</strong></code>. If we sort the list, it becomes <code><strong>[1, 2, 2, 3, 3, 4, 5, 5, 6]</strong></code>. The 4th smallest number is <code><strong>3</strong></code>, so the function returns <code><strong>3</strong></code>.<br><br>Note: For the purpose of this problem, we assume that duplicate numbers are counted as separate numbers. For example, in the second example above, the two <code><strong>2</strong></code>s are counted as the 2nd and 3rd smallest numbers, and the two <code><strong>3</strong></code>s are counted as the 4th and 5th smallest numbers.<br><br>Please write your solution in Python and use a max heap data structure to solve this problem. The <code><strong>MaxHeap</strong></code> class is provided for you.<br><br>Note:&nbsp;This is a separate function, not a method in the <code><strong>MaxHeap</strong></code> class so you will need to indent all the way to the left.</p><p><br></p>", "tests": [{"file_name": "evaluate.py", "content": "from unittest import TestCase\nimport unittest\n\n\n\nclass TestFindKthSmallest(unittest.TestCase):\n    \n    def test_random_array(self):\n        import exercise\n        nums = [3,2,1,5,6,4]\n        k = 2\n        result = exercise.find_kth_smallest(nums, k)\n        self.assertEqual(result, 2)\n        \n    def test_descending_array(self):\n        import exercise\n        nums = [6,5,4,3,2,1]\n        k = 3\n        result = exercise.find_kth_smallest(nums, k)\n        self.assertEqual(result, 3)\n        \n    def test_ascending_array(self):\n        import exercise\n        nums = [1,2,3,4,5,6]\n        k = 4\n        result = exercise.find_kth_smallest(nums, k)\n        self.assertEqual(result, 4)\n\n    def test_duplicates_array(self):\n        import exercise\n        nums = [3,2,3,1,2,4,5,5,6]\n        k = 4\n        result = exercise.find_kth_smallest(nums, k)\n        self.assertEqual(result, 3)"}], "solutions": [{"file_name": "exercise.py", "content": "class MaxHeap:\n    def __init__(self):\n        self.heap = []\n\n    def _left_child(self, index):\n        return 2 * index + 1\n\n    def _right_child(self, index):\n        return 2 * index + 2\n\n    def _parent(self, index):\n        return (index - 1) // 2\n\n    def _swap(self, index1, index2):\n        self.heap[index1], self.heap[index2] = self.heap[index2], self.heap[index1]\n\n    def insert(self, value):\n        self.heap.append(value)\n        current = len(self.heap) - 1\n\n        while current > 0 and self.heap[current] > self.heap[self._parent(current)]:\n            self._swap(current, self._parent(current))\n            current = self._parent(current)\n\n    def _sink_down(self, index):\n        max_index = index\n        while True:\n            left_index = self._left_child(index)\n            right_index = self._right_child(index)\n\n            if (left_index < len(self.heap) and \n                    self.heap[left_index] > self.heap[max_index]):\n                max_index = left_index\n\n            if (right_index < len(self.heap) and \n                    self.heap[right_index] > self.heap[max_index]):\n                max_index = right_index\n\n            if max_index != index:\n                self._swap(index, max_index)\n                index = max_index\n            else:\n                return\n                       \n    def remove(self):\n        if len(self.heap) == 0:\n            return None\n\n        if len(self.heap) == 1:\n            return self.heap.pop()\n\n        max_value = self.heap[0]\n        self.heap[0] = self.heap.pop()\n        self._sink_down(0)\n\n        return max_value\n\n\n\ndef find_kth_smallest(nums, k):\n    max_heap = MaxHeap()\n\n    for num in nums:\n        max_heap.insert(num)\n        if len(max_heap.heap) > k:\n            max_heap.remove()\n\n    return max_heap.remove()"}]};

      function renderCodeList(rootElement, codeList, className, titlePrefix) {
        for (var i = 0; i < codeList.length; i++) {
          var elem = codeList[i];
          var jsElem = document.createElement("div");
          jsElem.className = className;
          var jsElemTitle = document.createElement("h3");
          jsElemTitle.innerHTML = titlePrefix + " " + (i + 1);
          var jsElemBody = document.createElement("code");
          jsElemBody.className = "code-block black-block";
          jsElemBody.innerHTML = "<pre>" + elem.content + "</pre>";
          jsElem.appendChild(jsElemTitle);
          jsElem.appendChild(jsElemBody);
          rootElement.appendChild(jsElem);
        }
      }
      
      function main() {
        // display the assignment
        var codingTitle = document.getElementById("coding-title");
        codingTitle.innerHTML = quizData.title;
        
        var codingInstructions = document.getElementById("coding-instructions");
        if (quizData.hasInstructions) {
          codingInstructions.innerHTML = quizData.instructions;
        } else {
          codingInstructions.innerHTML = "<span class=\"italic-text\">" + quizData.instructions
            + "</span>";
        }

        // display the test(s)
        var codingTests = document.getElementById("coding-tests");
        if (!quizData.hasTests) {
          codingTests.innerHTML = "<span class=\"italic-text\">" + quizData.tests + "</span>";
        } else {
          renderCodeList(codingTests, quizData.tests, "coding-test", "Test");
        }
        

        // display the solution(s)
        var codingSolutions = document.getElementById("coding-solutions");
        if (!quizData.hasSolutions) {
          codingSolutions.innerHTML = "<span class=\"italic-text\">" + quizData.solutions + "</span>";
        } else {
          renderCodeList(codingSolutions, quizData.solutions, "coding-solution", "Solution");
        }
      }
    </script>
  </body>
</html>
